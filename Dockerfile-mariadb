## Dockerfile for building development image
FROM bitnami/mariadb:10.1-debian-10
LABEL maintainer "Igor Pellegrini <igor.pellegrini@live.com>"

ENV DISABLE_WELCOME_MESSAGE=1
ENV NODE_ENV=development
# ENV ALLOW_EMPTY_PASSWORD=0 # on production env

USER root

# initialize project SQL files when running container (schema, migrations)
# bitnami image supports docker-entrypoint-initdb.d/ to load *.sql, but it needs
# to be mounted as volume before the build starts (see `docker-compose.yml`)
COPY db /docker-entrypoint-initdb.d
RUN chmod -R +x /docker-entrypoint-initdb.d

# TODO:
# - use alpine mariadb; drop bitnami
# - init db manually, without needing to mount volume from docker-compose